[tools]
julia = "1.12.4"

[env]
JULIA_PROJECT = "@."
JULIA_NUM_THREADS = "auto"

[tasks.setup]
description = "Install dependencies and MuJoCo visualizer"
run = """
julia -e 'using Pkg; Pkg.instantiate()'
julia -e 'using MuJoCo; install_visualiser()'
"""

[tasks.so101]
description = "Run SO101 robot with WebSocket control"
run = "julia examples/so101/websocket_sim.jl"

[tasks.trossen]
description = "Run Trossen robot with WebSocket control"
run = "julia examples/trossen/websocket_sim.jl"

[tasks.so101-basic]
description = "Run SO101 basic demo (no WebSocket)"
run = "julia examples/so101/basic_sim.jl"

[tasks.trossen-basic]
description = "Run Trossen basic demo (no WebSocket)"
run = "julia examples/trossen/basic_sim.jl"

[tasks.lekiwi]
description = "Run LeKiwi mobile robot with WebSocket arm control"
run = "julia examples/lekiwi/websocket_sim.jl"

[tasks.lekiwi-basic]
description = "Run LeKiwi mobile robot basic demo (drives in circles)"
run = "julia examples/lekiwi/basic_sim.jl"

[tasks.franka]
description = "Run Franka Panda with WebSocket control"
run = "julia examples/franka/websocket_sim.jl"

[tasks.franka-basic]
description = "Run Franka Panda basic demo (no WebSocket)"
run = "julia examples/franka/basic_sim.jl"

[tasks.fanuc]
description = "Run Fanuc robot with WebSocket control (default: m10ia)"
run = "julia examples/fanuc/websocket_sim.jl"

[tasks.fanuc-basic]
description = "Run Fanuc robot basic demo (no WebSocket)"
run = "julia examples/fanuc/basic_sim.jl"

[tasks.fanuc-convert]
description = "Convert Fanuc URDF to MuJoCo XML (default variants)"
run = "julia scripts/convert_fanuc_industrial.jl"

[tasks.format]
description = "Format all Julia code"
run = "julia -e 'using JuliaFormatter; format(\".\")'"

[tasks.client]
description = "Run WebSocket test client"
run = "julia examples/clients/ws_client.jl"

# =============================================================================
# Unified Server Tasks
# =============================================================================

[tasks.server]
description = "Start unified multi-robot simulation server (port 8080)"
run = "julia unified_server.jl"

[tasks."server:8888"]
description = "Start unified server on port 8888"
run = "julia unified_server.jl --port 8888"
